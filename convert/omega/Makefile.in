all: omega

omega: omega.o p6hgame.o lex.p6h.o p6h.tab.o t5xgame.o lex.t5x.o t5x.tab.o
	$(CXX) -g -o omega omega.o p6hgame.o lex.p6h.o p6h.tab.o t5xgame.o lex.t5x.o t5x.tab.o -lfl

omega.o: omega.cpp omega.h p6hgame.h t5xgame.h
	$(CXX) -g -c omega.cpp

p6hgame.o: p6hgame.cpp omega.h p6hgame.h t5xgame.h
	$(CXX) -g -c p6hgame.cpp

lex.p6h.cpp: p6h.ll
	flex -8 -o lex.p6h.cpp p6h.ll

p6h.tab.cpp p6h.tab.hpp: p6h.ypp
	bison -d p6h.ypp

p6h.tab.o: p6h.tab.hpp p6h.tab.cpp p6hgame.h
	$(CXX) -g -c p6h.tab.cpp

lex.p6h.o: lex.p6h.cpp p6h.tab.hpp p6hgame.h
	$(CXX) -g -c lex.p6h.cpp

t5xgame.o: t5xgame.cpp omega.h t5xgame.h
	$(CXX) -g -c t5xgame.cpp

lex.t5x.cpp: t5x.ll
	flex -8 -o lex.t5x.cpp t5x.ll

t5x.tab.cpp t5x.tab.hpp: t5x.ypp
	bison -d t5x.ypp

t5x.tab.o: t5x.tab.hpp t5x.tab.cpp t5xgame.h
	$(CXX) -g -c t5x.tab.cpp

lex.t5x.o: lex.t5x.cpp t5x.tab.hpp t5xgame.h
	$(CXX) -g -c lex.t5x.cpp

clean:
	-rm -f *.o lex.p6h.cpp p6h.tab.cpp p6h.tab.hpp lex.t5x.cpp t5x.tab.cpp t5x.tab.hpp location.hh position.hh stack.hh
